

# ğŸ”„ ê°œì„ ëœ ì›Œí¬í”Œë¡œìš° ê°€ì´ë“œ

## âœ¨ ì£¼ìš” ê°œì„  ì‚¬í•­

### **ì´ì „ ë°©ì‹:**
```
detail.json â†’ [LLM] â†’ ë°”ë¡œ DB ì €ì¥
                â†“
           (ë°ì´í„° íœ˜ë°œ)
     (ì¬ì‹¤í–‰ì‹œ API ë¹„ìš© ì¬ë°œìƒ)
```

### **ê°œì„ ëœ ë°©ì‹:**
```
detail.json â†’ [LLM] â†’ structured.json â†’ DB ì €ì¥
                           â†“
                      (ì˜êµ¬ ë³´ì¡´)
                      (ì¬ì‚¬ìš© ê°€ëŠ¥)
                      (ê²€ì¦ ìš©ì´)
```

---

## ğŸ“Š íŒŒì¼ êµ¬ì¡°

| íŒŒì¼ | ì„¤ëª… | í¬ê¸° | ìš©ë„ |
|------|------|------|------|
| `fleamarket_posts.json` | ê²Œì‹œë¬¼ ëª©ë¡ (ì œëª©, ë§í¬, ì¸ë„¤ì¼) | ì‘ìŒ | í¬ë¡¤ë§ ê²°ê³¼ |
| `fleamarket_detail.json` | ê²Œì‹œë¬¼ ìƒì„¸ (ì›ë³¸ HTML í…ìŠ¤íŠ¸) | í¼ | ì›ë³¸ ë°ì´í„° |
| **`fleamarket_structured.json`** â­ | **LLM ì •ì œ ê²°ê³¼** | ì¤‘ê°„ | **í•µì‹¬ ë°ì´í„°** |
| `fleamarket.db` | SQLite ë°ì´í„°ë² ì´ìŠ¤ | ì¤‘ê°„ | ìµœì¢… ì €ì¥ì†Œ |

---

## ğŸ¯ ì¥ì 

### 1ï¸âƒ£ **LLM API ë¹„ìš© ì ˆê°**
```bash
# ê¸°ì¡´: DB ì¬ìƒì„±ì‹œë§ˆë‹¤ LLM í˜¸ì¶œ
del fleamarket.db
python pipeline.py  # ğŸ’¸ API ë¹„ìš© ì¬ë°œìƒ

# ê°œì„ : structured.json ì¬ì‚¬ìš©
del fleamarket.db
python structured_to_db.py  # ğŸ’° API ë¹„ìš© 0ì›!
```

### 2ï¸âƒ£ **ì¤‘ê°„ ë°ì´í„° ê²€ì¦**
```bash
# structured.json ì§ì ‘ í™•ì¸
cat fleamarket_structured.json

# ë°ì´í„° í’ˆì§ˆ í™•ì¸, ì˜¤ë¥˜ ë°œê²¬ ìš©ì´
```

### 3ï¸âƒ£ **ë‹¤ë¥¸ ì‹œìŠ¤í…œ ì—°ë™**
```python
# ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì—ì„œ structured.json ì‚¬ìš©
import json

with open("fleamarket_structured.json") as f:
    data = json.load(f)

# â†’ API ì„œë²„ë¡œ ì „ì†¡
# â†’ ë‹¤ë¥¸ DBì— ì €ì¥
# â†’ ë°ì´í„° ë¶„ì„
```

### 4ï¸âƒ£ **ë””ë²„ê¹… ìš©ì´**
```
ë¬¸ì œ ë°œìƒì‹œ:
1. structured.json í™•ì¸ â†’ LLM ì¶”ì¶œ ë¬¸ì œ
2. DB í™•ì¸ â†’ ì €ì¥ ë¡œì§ ë¬¸ì œ

ë¬¸ì œ ì˜ì—­ì„ ëª…í™•íˆ êµ¬ë¶„ ê°€ëŠ¥!
```

---

## ğŸš€ ì‚¬ìš© ë°©ë²•

### **A. ì „ì²´ ìë™ ì‹¤í–‰ (ê¶Œì¥)**

```bash
run_fast.bat
```

**ì‹¤í–‰ ë‚´ìš©:**
1. ì›¹ì‚¬ì´íŠ¸ í¬ë¡¤ë§ â†’ `posts.json`, `detail.json`
2. LLM ì •ì œ â†’ `structured.json` â­
3. DB ì €ì¥ â†’ `fleamarket.db`

---

### **B. ë‹¨ê³„ë³„ ì‹¤í–‰**

#### **1ë‹¨ê³„: í¬ë¡¤ë§**
```bash
python flea_list_fast.py    # â†’ posts.json
python flea_text_fast.py    # â†’ detail.json
```

#### **2ë‹¨ê³„: LLM ì •ì œ** â­
```bash
python extract_to_json.py   # â†’ structured.json
```

#### **3ë‹¨ê³„: DB ì €ì¥**
```bash
python structured_to_db.py  # â†’ fleamarket.db
```

---

### **C. íŠ¹ì • ë‹¨ê³„ë§Œ ì¬ì‹¤í–‰**

#### **LLM ì¬ì •ì œ (API ë¹„ìš© ë°œìƒ)**
```bash
python extract_to_json.py --force
```

#### **DBë§Œ ì¬ìƒì„± (API ë¹„ìš© 0ì›)**
```bash
del fleamarket.db
python init_db.py
python structured_to_db.py
```

---

## ğŸ“‹ ìƒí™©ë³„ ì‚¬ìš©ë²•

### **ì‹œë‚˜ë¦¬ì˜¤ 1: ì²˜ìŒ ì‚¬ìš©**
```bash
run_fast.bat
```
â†’ ëª¨ë“  ë‹¨ê³„ ìë™ ì‹¤í–‰

---

### **ì‹œë‚˜ë¦¬ì˜¤ 2: ì‹ ê·œ ê²Œì‹œë¬¼ ì¶”ê°€**
```bash
# ë°©ë²• 1: ì „ì²´ ìë™
run_fast.bat

# ë°©ë²• 2: ë‹¨ê³„ë³„
python flea_list_fast.py
python flea_text_fast.py
python extract_to_json.py    # ì‹ ê·œë§Œ ì²˜ë¦¬
python structured_to_db.py   # ì‹ ê·œë§Œ ì €ì¥
```

---

### **ì‹œë‚˜ë¦¬ì˜¤ 3: DB ìŠ¤í‚¤ë§ˆ ë³€ê²½**
```bash
# 1. DB ì‚­ì œ
del fleamarket.db

# 2. ìƒˆ ìŠ¤í‚¤ë§ˆë¡œ í…Œì´ë¸” ìƒì„±
python init_db.py

# 3. structured.json ì¬ì‚¬ìš© (API ë¹„ìš© 0ì›!)
python structured_to_db.py --force
```

---

### **ì‹œë‚˜ë¦¬ì˜¤ 4: LLM í”„ë¡¬í”„íŠ¸ ê°œì„ **
```bash
# 1. llm_processor.py ìˆ˜ì •

# 2. ì „ì²´ ì¬ì •ì œ (API ë¹„ìš© ë°œìƒ)
python extract_to_json.py --force

# 3. DB ì¬ìƒì„±
del fleamarket.db
python init_db.py
python structured_to_db.py --force
```

---

### **ì‹œë‚˜ë¦¬ì˜¤ 5: structured.json ê²€ì¦**
```bash
# JSON íŒŒì¼ í™•ì¸
python -m json.tool fleamarket_structured.json

# ë˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¡œ ê²€ì¦
python validate_structured.py
```

---

## ğŸ”§ ê³ ê¸‰ ì‚¬ìš©ë²•

### **1. ì¤‘ë³µ ë°ì´í„° ì œê±°**
```bash
python extract_to_json.py
# ìë™ìœ¼ë¡œ URL ê¸°ì¤€ ì¤‘ë³µ ì œê±°
```

### **2. ê°•ì œ ë®ì–´ì“°ê¸°**
```bash
# LLM ì¬ì •ì œ (ì „ì²´)
python extract_to_json.py --force

# DB ì¬ì €ì¥ (ì „ì²´)
python structured_to_db.py --force
```

### **3. ë ˆê±°ì‹œ ëª¨ë“œ (ê¸°ì¡´ ë°©ì‹)**
```bash
# structured.json ìƒì„± ì•ˆ í•˜ê³  ë°”ë¡œ DB ì €ì¥
python pipeline.py --legacy
```

---

## ğŸ“Š íŒŒì¼ í¬ê¸° ë° ì²˜ë¦¬ ì‹œê°„

| ê²Œì‹œë¬¼ ìˆ˜ | posts.json | detail.json | structured.json | DB | ì²˜ë¦¬ ì‹œê°„ |
|----------|-----------|-------------|-----------------|----|---------| 
| 100ê°œ | 50KB | 500KB | 100KB | 80KB | 5ë¶„ |
| 500ê°œ | 250KB | 2.5MB | 500KB | 400KB | 25ë¶„ |
| 1000ê°œ | 500KB | 5MB | 1MB | 800KB | 50ë¶„ |

---

## ğŸ’° ë¹„ìš© ë¹„êµ

### **ì‹œë‚˜ë¦¬ì˜¤: 100ê°œ ê²Œì‹œë¬¼, 5ë²ˆ DB ì¬ìƒì„±**

| ë°©ì‹ | LLM í˜¸ì¶œ | API ë¹„ìš© |
|------|---------|---------|
| **ê¸°ì¡´** | 100 Ã— 5 = 500íšŒ | $5.00 |
| **ê°œì„ ** | 100 Ã— 1 = 100íšŒ | $1.00 |
| **ì ˆê°** | -400íšŒ | **-$4.00 (80%)** |

---

## ğŸ› ï¸ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### **Q1: structured.jsonì´ ìƒì„±ë˜ì§€ ì•Šì•„ìš”**
```bash
# ì›ì¸: detail.json ì—†ìŒ
python flea_text_fast.py  # ë¨¼ì € ì‹¤í–‰
python extract_to_json.py
```

### **Q2: DBì— ë°ì´í„°ê°€ ì•ˆ ë“¤ì–´ê°€ìš”**
```bash
# ì›ì¸: structured.json ì—†ìŒ
python extract_to_json.py  # ë¨¼ì € ì‹¤í–‰
python structured_to_db.py
```

### **Q3: LLM ê²°ê³¼ë¥¼ ë‹¤ì‹œ ìƒì„±í•˜ê³  ì‹¶ì–´ìš”**
```bash
# --force í”Œë˜ê·¸ ì‚¬ìš©
python extract_to_json.py --force
```

### **Q4: ê¸°ì¡´ DB ë°ì´í„°ë¥¼ ìœ ì§€í•˜ê³  ì‹¶ì–´ìš”**
```bash
# ë°±ì—… í›„ ì¬ìƒì„±
copy fleamarket.db fleamarket_backup.db
python structured_to_db.py
```

---

## ğŸ“ ìš”ì•½

### **í•µì‹¬ íŒŒì¼: `fleamarket_structured.json`**

ì´ íŒŒì¼ì€:
- âœ… LLM ì •ì œ ê²°ê³¼ (ì˜êµ¬ ë³´ì¡´)
- âœ… DB ì¬ìƒì„± ê°€ëŠ¥ (API ë¹„ìš© 0ì›)
- âœ… ë‹¤ë¥¸ ì‹œìŠ¤í…œ ì—°ë™ ê°€ëŠ¥
- âœ… ë°ì´í„° ê²€ì¦ ìš©ì´

### **ê¶Œì¥ ì›Œí¬í”Œë¡œìš°**

```
1ì¼ì°¨: run_fast.bat â†’ ì „ì²´ ë°ì´í„° ìƒì„±
2~7ì¼ì°¨: ì‹ ê·œ ê²Œì‹œë¬¼ë§Œ ì¶”ê°€
8ì¼ì°¨: DB ë°±ì—… ë° ì •ë¦¬
```

---

**ë²„ì „**: 2.0 (structured.json ë„ì…)  
**ì—…ë°ì´íŠ¸**: 2025-10-10

